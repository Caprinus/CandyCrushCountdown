<!doctype html>
<html>
<!-- Quiero ver cuantos niveles me faltan para terminar Candy Crush -->


<head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>  
  
<!--<div
  class="bg-image"
  style="
    background-image: url('https://images.alphacoders.com/900/900894.jpg');
    height: 100vh;
  "
></div> -->
    
    <style>
     
      .roundstyle {
        background-color: pink; /* Changing background color */
        font-weight: bold; /* Making font bold */
        border-radius: 20px; /* Making border radius */
        width: auto; /* Making auto-sizable width */
        height: auto; /* Making auto-sizable height */
        padding: 5px 30px 5px 30px; /* Making space around letters */
        font-size: 16px; /* Changing font size */
}
    </style>

    <title>Candy Crush Countdown</title>

</head>

  
<body style="background-image: url('https://images.alphacoders.com/900/900894.jpg');">
  
  <div class="container">
  
  <div class="row justify-content-center"> 
    <div class="col-sm-12 col-md-8 col-lg-4">
      <img src="Imagenes/candy-crush-soda-saga.png" alt="CandyCrushSaga" width="400" height="400">
    </div>
  </div>

  <div class="row justify-content-center"> 
        <div class="col-sm-10 col-md-8 col-lg-6">
      <img src="Imagenes/Countdown.png" alt="Countdown" width="600" height="100">
    </div>
  </div>
  
  <div class="row justify-content-center"> 
    <div class="col-sm-10 col-md-8 col-lg-6" >
     <div class="roundstyle"> 
      <form class="text-center" style="background-color:pink;" onsubmit="return false">
            <label class="h6"> Actualmente existen 17900 niveles en CandyCrushSaga.</label><br>
            <label class="h6"> Semanalmente se agregan 15 niveles en promedio.</label><br>
            <label class="h6"> ¿En que nivel vas? :</label><br>
            <input type="text" id="etapa" name="etapa"><br>
            <label class="h6"> ¿Cuantos niveles completas a la semana? :</label><br>
            <input type="text" id="semanal" name="semanal"><br><br>
            <button onclick="Calcular()">¡Calcular!</button><br><br>
            <p id="Resultado"></p>
       </form> 
      </div> 
    </div>
  </div>
  
  </div>


  <script>
    
    var x = document.getElementById("Resultado");

    //const jsdom = require("jsdom");
    //const { JSDOM } = jsdom;

    (async () => {
      const response = await fetch('https://candycrush.fandom.com/wiki/List_of_Levels');
      //const response = await fetch('https://candycrush.fandom.com/wiki/Special:RecentChanges');
      const text = await response.text();
      //const dom = await new JSDOM(text);
      //console.log(dom.window.document.querySelector("h1").textContent);
      console.log(response);
    })()
    /*
    (async () => {
      const response = await fetch('https://candycrush.fandom.com/wiki/Special:RecentChanges');
      const text = await response.text();
      console.log(text.match(/(?<=\<h1>).*(?=\<\/h1>)/));
    })()
    */
    function Calcular() {
      
      var et = document.getElementById("etapa").value;
      var sem = document.getElementById("semanal").value;
      var lpw = 15;
      var total = 17900;
      var diff = total - parseInt(et);

      var res = parseInt(diff / (parseInt(sem) - lpw));
      var resmes=(res/4);
      var resannio= resmes/12;

      if ((sem-lpw)>0){
      x.innerHTML = " Terminarás Candy Crush en "+ res + " semanas aprox,"+
                "<br> lo que corresponde a "+ resmes +" meses, o "+
                "<br> "+ resannio +" años.";
      }
      else{ x.innerHTML = " Necesitas hacer más niveles a la semana :( "; }


    }



  </script>
  
  
  
</body>
  
  
</html>
